{"ast":null,"code":"import _classCallCheck from\"/Users/mariahudakova/Desktop/practicum/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mariahudakova/Desktop/practicum/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";export var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this.baseUrl=options.baseUrl;this.headers=options.headers;}_createClass(Api,[{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this.baseUrl,\"/cards\"),{headers:this.headers}).then(this._checkResponse);}},{key:\"getInfoUser\",value:function getInfoUser(){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{headers:this.headers}).then(this._checkResponse);}},{key:\"updateUserInfo\",value:function updateUserInfo(userData){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'PATCH',headers:{authorization:this.headers.authorization,'Content-Type':'application/json'},body:JSON.stringify(userData)}).then(this._checkResponse);}},{key:\"addNewCard\",value:function addNewCard(newCardData){return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:'POST',headers:{authorization:this.headers.authorization,'Content-Type':'application/json'},body:JSON.stringify({name:newCardData.description,link:newCardData.image})}).then(this._checkResponse);}},{key:\"addLike\",value:function addLike(cardId){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:'PUT',headers:{authorization:this.headers.authorization}}).then(this._checkResponse);}},{key:\"removeLike\",value:function removeLike(cardId){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:'DELETE',headers:{authorization:this.headers.authorization}}).then(this._checkResponse);}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(cardId),{method:'DELETE',headers:{authorization:this.headers.authorization}}).then(this._checkResponse);}},{key:\"updateUserAvatar\",value:function updateUserAvatar(data){return fetch(\"\".concat(this.baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({avatar:data.avatar})}).then(this._checkResponse);}},{key:\"_checkResponse\",value:function _checkResponse(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}return res.json();}}]);return Api;}();export var api=new Api({baseUrl:'https://api.mstar.students.nomoredomainsmonster.ru',headers:{authorization:\"Bearer \".concat(localStorage.getItem('token')),'Content-Type':'application/json'// authorization: `Bearer ${local}`\n}});","map":{"version":3,"names":["Api","options","_classCallCheck","baseUrl","headers","_createClass","key","value","getInitialCards","fetch","concat","then","_checkResponse","getInfoUser","updateUserInfo","userData","method","authorization","body","JSON","stringify","addNewCard","newCardData","name","description","link","image","addLike","cardId","removeLike","deleteCard","updateUserAvatar","data","avatar","res","ok","Promise","reject","status","json","api","localStorage","getItem"],"sources":["/Users/mariahudakova/Desktop/practicum/dev/mesto-react/mesto-react/src/utils/Api.js"],"sourcesContent":["export class Api {\n  constructor(options) {\n    this.baseUrl = options.baseUrl;\n    this.headers = options.headers;\n  }\n\n  getInitialCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: this.headers\n    }).then(this._checkResponse);\n  }\n\n  getInfoUser() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: this.headers\n    }).then(this._checkResponse);\n  }\n\n  updateUserInfo(userData) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this.headers.authorization,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    }).then(this._checkResponse);\n  }\n\n  addNewCard(newCardData) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this.headers.authorization,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: newCardData.description,\n        link: newCardData.image\n      })\n    }).then(this._checkResponse);\n  }\n\n  addLike(cardId) {\n    return fetch(`${this.baseUrl}/cards/${cardId}/likes`, {\n      method: 'PUT',\n      headers: {\n        authorization: this.headers.authorization\n      }\n    }).then(this._checkResponse);\n  }\n\n  removeLike(cardId) {\n    return fetch(`${this.baseUrl}/cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this.headers.authorization\n      }\n    }).then(this._checkResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this.baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this.headers.authorization\n      }\n    }).then(this._checkResponse);\n  }\n\n  updateUserAvatar(data) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    }).then(this._checkResponse);\n  }\n\n  _checkResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка ${res.status}`);\n    }\n    return res.json();\n  }\n}\n\nexport const api = new Api({\n  baseUrl: 'https://api.mstar.students.nomoredomainsmonster.ru',\n  headers: {\n    authorization: `Bearer ${localStorage.getItem('token')}`, \n    'Content-Type': 'application/json'\n    // authorization: `Bearer ${local}`\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}