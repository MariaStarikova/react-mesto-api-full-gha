{"ast":null,"code":"import _slicedToArray from\"/Users/mariahudakova/Desktop/practicum/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import{PopupWithForm,PopupEditProfile,PopupAddPlace,PopupRemove,PopupEditAvatar}from'./PopupWithForm';import ImagePopup from'./ImagePopup';import{api}from'../utils/Api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];function handleCardLike(card){// Снова проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(i){return i._id===currentUser.id;});// Отправляем запрос в API и получаем обновлённые данные карточки\n// api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n//   setCards(state => state.map(c => (c._id === card._id ? newCard : c)));\n// });\nif(!isLiked){api.addLike(card._id).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});return;}else{api.removeLike(card._id).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});return;}}useEffect(function(){api.getInfoUser().then(function(userInfo){setCurrentUser({name:userInfo.name,about:userInfo.about,avatar:userInfo.avatar,id:userInfo._id});// setCurrentUser({ userInfo });\n// setCurrentUser({ name, about, avatar });\nconsole.log(userInfo);}).catch(function(error){console.error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445: \".concat(error));});},[]);function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleCardClick(card){setSelectedCard(card);// console.log(card);\n// console.log(handleCardClick);\n}function closeAllPopups(){// console.log('Попапы закрыты');\nsetIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setSelectedCard(null);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page__content\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,cards:cards,setCards:setCards// userInfo={currentUser}\n}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",name:\"edit\",isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,children:/*#__PURE__*/_jsx(PopupEditProfile,{})}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",name:\"add\",isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,children:/*#__PURE__*/_jsx(PopupAddPlace,{})}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",name:\"remove\",onClose:closeAllPopups,children:/*#__PURE__*/_jsx(PopupRemove,{})}),/*#__PURE__*/_jsx(PopupWithForm,{title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",name:\"update\",isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,children:/*#__PURE__*/_jsx(PopupEditAvatar,{})}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Main","Footer","PopupWithForm","PopupEditProfile","PopupAddPlace","PopupRemove","PopupEditAvatar","ImagePopup","api","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_useState3","_useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_useState5","_useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_useState7","_useState8","selectedCard","setSelectedCard","_useState9","_useState10","currentUser","setCurrentUser","_useState11","_useState12","cards","setCards","handleCardLike","card","isLiked","likes","some","i","_id","id","addLike","then","newCard","state","map","c","catch","err","console","log","removeLike","getInfoUser","userInfo","name","about","avatar","error","concat","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","closeAllPopups","Provider","value","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","title","isOpen","onClose"],"sources":["/Users/mariahudakova/Desktop/practicum/dev/mesto-react/mesto-react/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport {\n  PopupWithForm,\n  PopupEditProfile,\n  PopupAddPlace,\n  PopupRemove,\n  PopupEditAvatar\n} from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [cards, setCards] = useState([]);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser.id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    // api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n    //   setCards(state => state.map(c => (c._id === card._id ? newCard : c)));\n    // });\n\n    if (!isLiked) {\n      api\n        .addLike(card._id)\n        .then(newCard => {\n          setCards(state => state.map(c => (c._id === card._id ? newCard : c)));\n        })\n        .catch(err => console.log(err));\n      return;\n    } else {\n      api\n        .removeLike(card._id)\n        .then(newCard => {\n          setCards(state => state.map(c => (c._id === card._id ? newCard : c)));\n        })\n        .catch(err => console.log(err));\n      return;\n    }\n  }\n\n  useEffect(() => {\n    api\n      .getInfoUser()\n      .then(userInfo => {\n        setCurrentUser({\n          name: userInfo.name,\n          about: userInfo.about,\n          avatar: userInfo.avatar,\n          id: userInfo._id\n        });\n        // setCurrentUser({ userInfo });\n        // setCurrentUser({ name, about, avatar });\n        console.log(userInfo);\n      })\n      .catch(error => {\n        console.error(`Ошибка при получении данных: ${error}`);\n      });\n  }, []);\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    // console.log(card);\n    // console.log(handleCardClick);\n  }\n\n  function closeAllPopups() {\n    // console.log('Попапы закрыты');\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__content\">\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          cards={cards}\n          setCards={setCards}\n          // userInfo={currentUser}\n        />\n        <Footer />\n        <PopupWithForm\n          title=\"Редактировать профиль\"\n          name=\"edit\"\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n        >\n          <PopupEditProfile />\n        </PopupWithForm>\n        <PopupWithForm\n          title=\"Новое место\"\n          name=\"add\"\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n        >\n          <PopupAddPlace />\n        </PopupWithForm>\n        <PopupWithForm title=\"Вы уверены?\" name=\"remove\" onClose={closeAllPopups}>\n          <PopupRemove />\n        </PopupWithForm>\n        <PopupWithForm\n          title=\"Обновить аватар\"\n          name=\"update\"\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n        >\n          <PopupEditAvatar />\n        </PopupWithForm>\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}